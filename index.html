<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClickGG | Sklep</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Dodatkowe style dla poprawnego działania modala, których brakowało w CSS */
        .custom-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none; /* Ukryty na start */
            justify-content: center;
            align-items: center;
            z-index: 2000; /* Musi być wyżej niż koszyk */
        }

        .modal-box {
            background: #0a0a0f;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(0, 242, 255, 0.2);
            max-width: 450px;
            width: 90%;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
        }

        .modal-box h2 {
            margin-bottom: 15px;
            font-size: 24px;
            color: #fff;
        }

        .modal-box p {
            color: #94a3b8;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>

    <div class="glow-bg"></div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Twoje zakupy</h2>
            <i data-lucide="x" class="close-cart" onclick="toggleCart()"></i>
        </div>
        <div id="cartItems">
            <p style="color: var(--text-dim)">Koszyk jest pusty...</p>
        </div>
        <div class="cart-total">
            <span>Suma:</span>
            <span><span id="totalPrice">0,00</span> PLN</span>
        </div>
        <button class="buy-now" onclick="openCheckout()" style="margin-top: 30px; width: 100%;">Przejdź do kasy</button>
    </div>

    <nav class="navbar">
        <div class="logo">
            <img src="main.png" alt="ClickGG">
        </div>
        <div class="nav-menu">
            <a href="#" class="active">Sklep</a>
            <a href="#">Serwer</a>
            <a href="https://discord.gg/clickgg" target="_blank">Discord</a>
        </div>
        <div class="nav-right">
            <div class="cart-wrapper" onclick="toggleCart()">
                <i data-lucide="shopping-cart"></i>
                <div class="cart-count" id="cartCount">0</div>
            </div>
            <button class="steam-login-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/83/Steam_icon_logo.svg" alt="Steam">
                <span>Zaloguj przez Steam</span>
            </button>
        </div>
    </nav>

    <header class="hero">
        <span class="top-badge">NOWA EDYCJA</span>
        <h1>CLICK<span>GG</span></h1>
        <p>Najlepszy sklep Fivem.</p>
    </header>

    <div class="tabs-container">
        <button class="tab-btn active" onclick="filterShop('all', this)">Wszystko</button>
        <button class="tab-btn" onclick="filterShop('rangi', this)">Rangi</button>
        <button class="tab-btn" onclick="filterShop('pojazdy', this)">Pojazdy</button>
        <button class="tab-btn" onclick="filterShop('unbany', this)">Unbany</button>
        <button class="tab-btn" onclick="filterShop('waluty', this)">Waluty</button>
        <button class="tab-btn" onclick="filterShop('inne', this)">Inne</button>
    </div>

    <section class="shop-container">
        <div class="products-grid" id="productsGrid"></div>
    </section>

    <a href="https://discord.gg/clickgg" target="_blank" class="discord-float">
        <i data-lucide="message-square"></i>
    </a>

    <div id="checkoutModal" class="custom-modal">
        <div class="modal-box">
            <h2>Informacje o zakupie</h2>
            <p>Aby dokonać zakupu, dołącz do naszego serwera Discord i stwórz ticketa w kategorii <strong>"zakup"</strong>.</p>
            
            <a href="https://discord.gg/clickgg" class="discord-btn-argb">DOŁĄCZ DO DISCORDA</a>
            
            <button onclick="closeModal()" class="close-modal-btn">Zamknij</button>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, name: "VIP", price: 14.99, cat: "rangi", tag: "BASIC", img: "vip.png" },
            { id: 2, name: "REVIVATOR", price: 19.99, cat: "rangi", tag: "POPULAR", img: "revivator.png" },
            { id: 3, name: "TRIAL SUPPORT", price: 29.99, cat: "rangi", tag: "STAFF", img: "tsup.png" },
            { id: 4, name: "SUPPORT", price: 39.99, cat: "rangi", tag: "STAFF", img: "support.png" },
            { id: 5, name: "MODERATOR", price: 49.99, cat: "rangi", tag: "STAFF", img: "moderator.png" },
            { id: 6, name: "SENIOR MODERATOR", price: 64.99, cat: "rangi", tag: "STAFF", img: "smoderator.png" },
            { id: 7, name: "ADMIN", price: 99.99, cat: "rangi", tag: "ADMIN", img: "admin.png" },
            { id: 8, name: "SENIOR ADMIN", price: 149.99, cat: "rangi", tag: "ADMIN", img: "sadmin.png" },
            { id: 9, name: "HEAD ADMIN", price: 199.99, cat: "rangi", tag: "ADMIN", img: "hadmin.png" },
            { id: 10, name: "MANAGMENT", price: 299.99, cat: "rangi", tag: "MANAGEMENT", img: "managment.png" }, 
            { id: 11, name: "PROJECT MANAGER", price: 349.99, cat: "rangi", tag: "MANAGEMENT", img: "pmanager.png" },
            { id: 12, name: "ZARZĄD", price: 399.99, cat: "rangi", tag: "EXCLUSIVE", img: "zarzad.png" },
            { id: 13, name: "WŁODARZ", price: 499.99, cat: "rangi", tag: "EXCLUSIVE", img: "wlodarz.png" },
            { id: 14, name: "PRAWA RĘKA", price: 999.99, cat: "rangi", tag: "ULTIMATE", img: "prawa.png" },
            { id: 15, name: "ZWOLNIENIE Z PRAC SPOŁECZNYCH", price: 9.99, cat: "unbany", tag: "OP", img: "prace.png" },
            { id: 16, name: "UNBAN (bany 1-3 dni)", price: 24.99, cat: "unbany", tag: "OP", img: "unban.png" },
            { id: 17, name: "UNBAN (bany 3-7 dni)", price: 49.99, cat: "unbany", tag: "OP", img: "unban.png" },
            { id: 18, name: "UNBAN (bany 7-30 dni) ", price: 69.99, cat: "unbany", tag: "OP", img: "unban.png" },
            { id: 19, name: "UNBAN (PERM) ", price: 99.99, cat: "unbany", tag: "OP", img: "unban.png" },
            { id: 20, name: "UNBAN (BLACKLISTA) ", price: 199.99, cat: "unbany", tag: "OP", img: "unban.png" },
            { id: 21, name: "LIMITKA (Zamknięta)", price: 249.99, cat: "pojazdy", tag: "LIMITED", img: "limitka.png" },
            { id: 22, name: "LIMITKA (Otwarta)", price: 199.99, cat: "pojazdy", tag: "LIMITED", img: "limitka2.png" },
            { id: 23, name: "1000 Coins", price: 14.99, cat: "waluty", tag: "CURRENCY", img: "coinsy.png" },
            { id: 24, name: "3000 Coins", price: 44.99, cat: "waluty", tag: "CURRENCY", img: "coinsy.png" },
            { id: 25, name: "5000 Coins", price: 69.99, cat: "waluty", tag: "POPULAR", img: "coinsy.png" },
            { id: 26, name: "25000 Coins", price: 249.99, cat: "waluty", tag: "BIG PACK", img: "coinsy.png" },
            { id: 27, name: "100000 Coins", price: 999.99, cat: "waluty", tag: "ULTIMATE", img: "coinsy.png" },
            { id: 28, name: "CUSTOM TAG", price: 14.99, cat: "inne", tag: "OTHER", img: "ctag.png" },
            { id: 29, name: "CUSTOM DŹWIĘK POJAZDU", price: 39.99, cat: "inne", tag: "OTHER", img: "dzwiek.png" },
            { id: 30, name: "DODATKOWA POSTAĆ", price: 49.99, cat: "inne", tag: "OTHER", img: "postac.png" },
            { id: 31, name: "CUSTOM INTERIOR", price: 799.99, cat: "inne", tag: "OTHER", img: "int.png" },
            { id: 32, name: "WŁASNA FIRMA", price: 499.99, cat: "inne", tag: "OTHER", img: "firma.png" },
            { id: 33, name: "WŁASNY HELIKOPTER", price: 299.99, cat: "inne", tag: "OTHER", img: "helka.png" },
        ];

        let cart = [];
        lucide.createIcons();

        function renderProducts(filter = 'all') {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            const filtered = filter === 'all' ? products : products.filter(p => p.cat === filter);

            filtered.forEach(p => {
                const imgTag = p.img ? `<img src="${p.img}" class="card-image" alt="${p.name}">` : '';
                grid.innerHTML += `
                    <div class="product-card">
                        <div>
                            <div class="card-tag">${p.tag}</div>
                            ${imgTag}
                            <h3>${p.name}</h3>
                        </div>
                        <div>
                            <div class="price">${p.price.toFixed(2).replace('.', ',')} <span>PLN</span></div>
                            <button class="buy-now" onclick="addToCart(${p.id}, event)">DODAJ DO KOSZYKA</button>
                        </div>
                    </div>
                `;
            });
        }

        function filterShop(cat, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderProducts(cat);
        }

        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('open');
        }

        function addToCart(id, event) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            updateCart();
            
            const btn = event.currentTarget;
            const originalText = btn.innerText;
            btn.innerText = "DODANO! +";
            btn.style.background = "linear-gradient(135deg, #00ff88, #00cc6a)";
            
            setTimeout(() => {
                btn.innerText = originalText;
                btn.style.background = "";
            }, 1000);
        }

        // FUNKCJA OTWIERAJĄCA MODAL Z KASY
        function openCheckout() {
            if (cart.length === 0) {
                alert("Twój koszyk jest pusty!");
                return;
            }
            document.getElementById('checkoutModal').style.display = 'flex';
            document.getElementById('cartSidebar').classList.remove('open'); // Zamyka boczny pasek
        }

        function closeModal() {
            document.getElementById('checkoutModal').style.display = 'none';
        }

        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartCount = document.getElementById('cartCount');
            const totalSpan = document.getElementById('totalPrice');
            cartCount.innerText = cart.length;
            
            if(cart.length === 0) {
                cartItems.innerHTML = '<p style="color: var(--text-dim)">Koszyk jest pusty...</p>';
                totalSpan.innerText = "0,00";
                return;
            }
            
            let total = 0;
            cartItems.innerHTML = '';
            cart.forEach((item, index) => {
                total += item.price;
                cartItems.innerHTML += `
                    <div class="cart-item">
                        <span>${item.name}</span>
                        <div>
                            <strong>${item.price.toFixed(2).replace('.', ',')} PLN</strong>
                            <button class="remove-item" onclick="removeFromCart(${index})">x</button>
                        </div>
                    </div>
                `;
            });
            totalSpan.innerText = total.toFixed(2).replace('.', ',');
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        renderProducts();
    </script>
</body>
</html>